(function(t,e,i,s){"use strict";var n={};n.Model=s.Model.extend({defaults:{isEnabled:!0,isSelected:!0},initialize:function(){}}),n.TestModel=s.Model.extend({defaults:{id:"default",value:"undefined",text:"Default",isSelected:!1,h1Text:"h1Text_string",caText:"canada",usText:"UnitedStates",mexText:"Mexico"},initialize:function(){}}),n.DropDownOption=s.Model.extend({defaults:{id:"default",value:"undefined",text:"Default",isSelected:!1},initialize:function(){},url:function(){return this.get("id")}}),n.MenuItem=s.Model.extend({defaults:{value:"undefined",text:"Default",isSelected:!1},initialize:function(){},url:function(){return this.get("id")}}),n.Menu=s.Collection.extend({model:n.MenuItem}),n.UserInformation=s.Model.extend({defaults:{ddTitle:"",tbFirstName:"",tbLastName:"",tbAddress:"",tbApartment:"",tbCity:"",ddProvince:"",tbEmailAddress:"",tbPostalCode:"",dealerCode:"",model:"B5AXX",tbMethodOfContact:"",tbHomePhone:"",tbCellPhone:"",cbOptin:"false",tracking:{}},initialize:function(t){this.accounting=t.accounting,this.eventAggr=t.eventAggr,this.service=t.url.service,this.app=t.url.app,this.output=t.url.output,this.action=t.url.action,this.contextPage=t.url.contextPage,this.lang=t.url.lang,t.url.test&&(this.test=t.url.test),t.url.testUrl&&(this.testUrl=t.url.testUrl),i(this).bindAll("onError","save"),this.bind("error",this.onError)},onError:function(){},validation:{tbMethodOfContact:{required:!0,msg:"msg: Method of contact not valid."},ddTitle:{required:!0,msg:"msg: Title not valid."},tbFirstName:{required:!0,pattern:"userName",msg:"msg: First name not valid."},tbLastName:{pattern:"userName",required:!0,msg:"msg: Last name not valid."},tbAddress:{required:!0,msg:"msg: Address not valid."},tbApartment:{required:!1,msg:"msg: Apartment not valid."},tbCity:{required:!0,msg:"msg: City not valid."},ddProvince:{required:!0,msg:"msg: Province not valid."},tbEmailAddress:{pattern:"email",required:!0,msg:"msg: Email not valid."},dealerCode:{required:!0,msg:"msg: Dealer code not valid."},model:{required:!0,msg:"msg: Model not valid."},tbPostalCode:{required:!0,pattern:"postalcode",msg:"Postal Code not valid."},tbHomePhone:{required:!1,pattern:"phoneNumber",msg:"Home phone number not valid."},tbCellPhone:{required:!1,pattern:"phoneNumber",msg:"Cell phone number not valid."}},save:function(){var t=this;return this.isValid()?(e.ajax({type:"POST",url:t.url(),dataType:t.output,success:function(e){t.parseData(e)},failure:function(t){this.eventAggr.trigger("serviceError",t)},error:function(t,e,i){this.eventAggr.trigger("serviceError",i)}}),void 0):!1},url:function(){if(this.test)return this.testUrl;var t="&ddTitle="+this.get("ddTitle"),e="&tbFirstName="+this.get("tbFirstName"),i="&tbLastName="+this.get("tbLastName"),s="&tbAddress="+this.get("tbAddress"),n="&tbApartment="+this.get("tbApartment"),l="&tbCity="+this.get("tbCity"),a="&ddProvince="+this.get("ddProvince"),o="&tbEmailAddress="+this.get("tbEmailAddress"),h="&tbPostalCode="+this.get("tbPostalCode"),d="&dealerCode="+this.get("dealerCode"),r="&model="+this.get("model"),c="&tbMethodOfContact="+this.get("tbMethodOfContact"),m="&tbHomePhone="+this.get("tbHomePhone"),g="&tbCellPhone="+this.get("tbCellPhone"),p="&cbOptin="+this.get("cbOptin"),u="&trim1="+this.get("paymentOptionA").get("trim"),v="&term1="+this.get("paymentOptionA").get("term"),f="&paymentType1="+this.get("paymentOptionA").get("type").charAt(0),x="&paymentAmountLease1="+this.get("paymentOptionA").get("downPayment"),b="&paymentAmountFinance1="+this.get("paymentOptionA").get("downPayment"),$="&trim2="+this.get("paymentOptionB").get("trim"),w="&term2="+this.get("paymentOptionB").get("term"),y="&paymentType2="+this.get("paymentOptionB").get("type").charAt(0),C="&paymentAmountLease2="+this.get("paymentOptionB").get("downPayment"),V="&paymentAmountFinance2="+this.get("paymentOptionB").get("downPayment");return this.service+"?app="+this.app+"&contextPage="+this.contextPage+"&output="+this.output+"&action="+this.action+"&lang="+this.lang+t+e+i+s+n+l+a+o+h+d+r+c+g+m+p+u+v+f+x+b+$+w+y+C+V},parseData:function(t){if(-201==t.serviceResponse.code||"-201"==t.serviceResponse.code){var e={};i.each(t.serviceResponse.response.validation.field,function(t){e[t.id]=""},this),this.set(e,{forceUpdate:!0})}this.eventAggr.trigger("sendToDealerOnSuccess",this)}}),t.models=n})(app,jQuery,_,Backbone),function(t,e,i,s){var n={};n.BaseClass=s.View.extend({childViews:{},id:"default",text:{},data:{},isSelected:!1,isVisible:!0,isEnabled:!0,isCollapsed:!1,isCollapsable:!1,isRendered:!1,initialize:function(t){if(!t.template)throw"You need to supply a template!";if(!t.controller)throw"You need to supply a controller!";i.extend(this,t),this.model||(this.model=new s.Model),this.$el=e(this.template(i.extend(this.text,this.data,this.model.toJSON()))),this.$content=this.content?this.$el.find(this.content):this.$el,i(this).bindAll("add","remove","reset"),this.model.bind("change",this.render,this),this.start()},start:function(){return this},render:function(){this.isRendered=!0,this.$el.html(e(this.template(i.extend(this.text,this.data,this.model.toJSON()))).html()),this.$content=this.content?this.$el.find(this.content):this.$el;for(var t in this.childViews)this.childViews[t].render();return this.originalHeight=this.$el.height(),this.originalWidth=this.$el.width(),this},reset:function(t){t&&(this.model=t);for(var s in this.childViews)this.childViews[s].remove();this.$el.html(e(this.template(i.extend(this.text,this.data,this.model.toJSON()))).html());for(var s in this.childViews)this.add(this.childViews[s],this.childViews[s].meta);return this.originalHeight=this.$el.height(),this.originalWidth=this.$el.width(),this},get:function(t){return t?this.childViews[t]?this.childViews[t]:void 0:this},add:function(t,e){if(this.childViews[t.id])throw"You can not add two views with the same id!";var s={method:"append",options:{},selector:this.$content};return e&&i.extend(s,e),t.parent=this,t.meta=s,this.childViews[t.id]=t,s.selector[s.method](t.$el),this.originalHeight=this.$el.height(),this.originalWidth=this.$el.width(),t},remove:function(t){if(t)return this.childViews[t].remove();for(var e in this.childViews)this.childViews[e].remove();return this.model.unbind("change",this.render,this),this.$el.remove(),this.isRendered=!1,this},destroy:function(t){if(t)return this.childViews[t].remove(),delete this.childViews[t],this;for(var e in this.childViews)this.childViews[e].remove(),this.childViews[e].destroy(),this.childViews[e]=null;return this.model.unbind("change",this.render,this),this.remove(),delete this,this},children:function(){return this.childViews},enabled:function(t){return void 0==t||void 0==this.isEnabled?this.isEnabled:(this.isEnabled!=t&&(this.isEnabled=t,this.toggleEnabled()),this)},selected:function(t){return void 0==t?this.isSelected:(this.isSelected!=t&&(this.isSelected=t,this.toggleSelected()),this)},visible:function(t){return void 0==t||void 0==this.isVisible?this.isVisible:(this.isVisible!=t&&(this.isVisible=t,this.toggleVisible()),this)},collapsed:function(t){return void 0==t?this.isCollapsed:(this.isCollapsed!=t&&(this.isCollapsed=t,this.toggleCollapsed()),void 0)},toggleCollapsed:function(){},toggleSelected:function(){1==this.model.get("isSelected")?this.$el.addClass("selected"):0==this.model.get("isSelected")&&this.$el.removeClass("selected")},toggleVisible:function(){1==this.isVisible?(this.$el.addClass("visible"),this.$el.removeClass("hidden")):0==this.isVisible&&(this.$el.removeClass("visible"),this.$el.addClass("hidden"))},toggleEnabled:function(){1==this.isEnabled?(this.$el.addClass("enabled"),this.$el.removeClass("disabled"),this.$el.css("opacity","1")):0==this.isEnabled&&(this.$el.removeClass("enabled"),this.$el.addClass("disabled"),this.$el.css("opacity",".5"))}}),n.TestView=n.BaseClass.extend({tagName:"section",events:{"click #ca-div":"onClickEventHandler","click #us-div":"onClickEventHandler","click #mex-div":"onClickEventHandler"},start:function(){},onClickEventHandler:function(t){t.preventDefault(),this.controller.trigger("testEvent",e("#"+t.currentTarget.id).text())}}),n.ListBaseClass=n.BaseClass.extend({childViews:[],id:"default",text:{},data:{},isSelected:!1,isVisible:!0,isEnabled:!0,isCollapsed:!1,isCollapsable:!1,isRendered:!1,initialize:function(t){if(!t.template)throw"You need to supply a template!";if(!t.controller)throw"You need to supply a controller!";i.extend(this,t),this.model||(this.model=new s.Model),this.$el=e(this.template(i.extend(this.text,this.data,this.model.toJSON()))),this.$content=this.content?this.$el.find(this.content):this.$el,i(this).bindAll("add","remove","reset"),this.model.bind("change",this.render,this),this.collection.bind("reset",this.reset,this),this.start()},start:function(){return this},render:function(){return this.isRendered=!0,this.$el.html(e(this.template(i.extend(this.text,this.data,this.model.toJSON()))).html()),this.$content=this.content?this.$el.find(this.content):this.$el,i.each(this.childViews,function(t){t.render()},this),this.originalHeight=this.$el.height(),this.originalWidth=this.$el.width(),this},reset:function(){return i.each(this.childViews,function(t){t.remove()},this),this.$el.html(e(this.template(i.extend(this.text,this.data,this.model.toJSON()))).html()),this.$content=this.content?this.$el.find(this.content):this.$el,this.childViews=[],i.each(this.collection.models,function(t){this.add(new this.childViewConstructor({model:t,controller:this.controller,template:this.childTemplate,text:this.text,data:this.data,id:t.get("id")}))},this),this},get:function(){},add:function(t,e){var s={method:"append",options:{},selector:this.$content};return e&&i.extend(s,e),t.parent=this,t.meta=s,t.render(),this.childViews.push(t),s.selector[s.method](t.$el),this.originalHeight=this.$el.height(),this.originalWidth=this.$el.width(),t},remove:function(){return this},destroy:function(){return this},children:function(){return this.childViews}}),n.TestList=n.ListBaseClass.extend({tagName:"ul",events:{"click #ca-div":"onClickEventHandler","click #us-div":"onClickEventHandler","click #mex-div":"onClickEventHandler"},start:function(){},onClickEventHandler:function(t){t.preventDefault()}}),n.TestListItem=n.BaseClass.extend({tagName:"li",events:{click:"onClickEventHandler"},start:function(){},onClickEventHandler:function(t){t.preventDefault()}}),n.View=n.BaseClass.extend({initialize:function(){this.$content=this.$el,this.render()},render:function(){this._rendered=!0;for(var t in this.childViews)this.childViews[t].$el.remove(),delete this.childViews[t];this.childViews={};for(var t in this.childViews)this.childViews[t].render(),this.$el.append(this.childViews[t].$el);return this}}),n.ComponentSection=n.BaseClass.extend({tagName:"section",initialize:function(e){if(!e.template)throw"You need to supply a template!";if(!e.text)throw"You need to some text!";this.template=e.template?e.template:t.config.templates.get("estimate-payments-tmpl"),this.text=e.text?e.text:t.config.staticText.get(),e.content&&(this.content=e.content),void 0!=e.isEnabled&&(this.isEnabled=e.isEnabled),void 0!=e.isVisible&&(this.isVisible=e.isVisible),e.tagName&&(this.tagName=e.tagName),e.id&&(this.id=e.id),this.render()}}),n.Button=n.BaseClass.extend({tagName:"div",events:{click:"onClickEventHandler"},initialize:function(e){if(!e.template)throw"You need to supply a template!";if(!e.text)throw"You need to some text!";this.template=e.template?e.template:t.config.templates.get("estimate-payments-tmpl"),this.text=e.text?e.text:t.config.staticText.get(),e.content&&(this.content=e.content),void 0!=e.isEnabled&&(this.isEnabled=e.isEnabled),void 0!=e.isVisible&&(this.isVisible=e.isVisible),e.tagName&&(this.tagName=e.tagName),e.id&&(this.id=e.id),e.eventAggr&&(this.eventAggr=e.eventAggr),e.event&&(this.event=e.event),this.render()},onClickEventHandler:function(t){t.preventDefault(),this.eventAggr.trigger(this.event,this.model)}}),n.DropDownOption=n.BaseClass.extend({tagName:"option",events:{},initialize:function(t){this.eventAggr=t.eventAggr,this.template=t.template,this.event=t.event,t.text&&(this.text=t.text),this.render()},render:function(t){t&&(this.model=t),this.$el=e(this.template(this.model.toJSON())),this._rendered=!0,this.model.bind("change:isSelected",this.toggleSelected,this)},toggleSelected:function(){1==this.model.get("isSelected")?this.$el.attr("selected","selected"):this.$el.removeAttr("selected")},onClickEventHandler:function(t){t.preventDefault(),this.eventAggr.trigger(this.event,this.model)},onChangeEventHandler:function(t){t.preventDefault()}}),n.DropDownSelect=n.ListBaseClass.extend({tagName:"select",events:{change:"onChangeEventHandler"},initialize:function(e){this.template=e.template?e.template:t.config.templates.get("tab-nav"),this.text=e.text?e.text:t.config.staticText.get(),this.collection=e.collection,this.eventAggr=e.eventAggr,this.event=e.event,this.childViewConstructor=e.childViewConstructor,this.childTemplate=e.childTemplate,this.content=e.content,e.id&&(this.id=e.id),this.render(),this.collection.bind("reset",this.render,this)},onChangeEventHandler:function(t){t.preventDefault(),this.eventAggr.trigger(this.event,this.collection.get(t.currentTarget.value))}}),n.Options=s.View.extend({tagName:"select",initialize:function(){this.data=this.options.data,this.selected=this.options.selected},reset:function(){var t=i.map(this.data,function(t,e){return'<option value="'+e+'">'+t+"</option>"}).join("");this.$el.html(t),this.render()},render:function(){return this.$el.val(this.selected),this}}),n.TitlePane=n.BaseClass.extend({tagName:"li",initialize:function(e){this.template=e.template?e.template:t.config.templates.get("select-vehicle"),this.text=e.text?e.text:t.config.staticText.get(),this.content=e.content,this.render()}}),n.TabNav=n.ListBaseClass.extend({tagName:"table",initialize:function(e){this.template=e.template?e.template:t.config.templates.get("tab-nav"),this.text=e.text?e.text:t.config.staticText.get(),this.collection=e.collection,this.eventAggr=e.eventAggr,this.event=e.event,this.childViewConstructor=e.childViewConstructor,this.childTemplate=e.childTemplate,this.content=e.content,this.render()}}),n.NavTab=n.BaseClass.extend({tagName:"td",data:{label:"label<br>line2",id:"cat-cars"},events:{click:"onClickEventHandler"},initialize:function(t){this.eventAggr=t.eventAggr,this.template=t.template,this.event=t.event,this.render()},render:function(t){t&&(this.model=t),this.model.bind("change:isSelected",this.toggleSelected,this),this.$el=e(this.template(this.model.toJSON()))},toggleSelected:function(){this.$el.toggleClass("selected")},onClickEventHandler:function(t){t.preventDefault(),this.eventAggr.trigger(this.event,this.model)}}),n.ListPane=n.ListBaseClass.extend({tagName:"ul",initialize:function(e){this.template=e.template?e.template:t.config.templates.get("tab-nav"),this.text=e.text?e.text:t.config.staticText.get(),this.collection=e.collection,this.eventAggr=e.eventAggr,this.event=e.event,this.childViewConstructor=e.childViewConstructor,this.childTemplate=e.childTemplate,this.data=e.data,this.options.content&&(this.content=e.content),this.render()}}),n.VehicleListPane=n.ListBaseClass.extend({tagName:"ul",initialize:function(e){this.template=e.template?e.template:t.config.templates.get("tab-nav"),this.text=e.text?e.text:t.config.staticText.get(),this.collection=e.collection,this.eventAggr=e.eventAggr,this.event=e.event,this.childViewConstructor=e.childViewConstructor,this.childTemplate=e.childTemplate,this.data=e.data,e.content&&(this.content=e.content),void 0!=e.isVisible&&(this.isVisible=e.isVisible),this.render()},render:function(t){if(!this.template)throw"no template provided";if(!this.collection)throw"no ccollection provided";if(!this.childViewConstructor)throw"no child view constructor provided";if(!this.eventAggr)throw"no eventAggr provided";if(!this.childTemplate)throw"no childTemplate provided";this._rendered=!0;for(var s=0;this.childViews.length>s;s++)this.childViews[s].$el.remove(),delete this.childViews[s];return this.childViews=[],this.text||(this.text={}),this.collection&&t&&(this.collection=t),this.$el=this.model?e(this.template(this.model.toJSON())):e(this.template(this.text)),this.$content||(this.$content=this.content?this.$(this.content):this.$el),void 0!=this.isVisible&&(this.toggleVisible(),this.bind("change:isVisible",this.toggleVisible,this)),i(this).bindAll("add","remove","reset","loadComplete"),this.reset(),this.collection.bind("reset",this.reset),this},add:function(t){if(!this.childViewConstructor)throw"no child view constructor provided";if(!this.eventAggr)throw"no eventAggr provided";if(!this.event)throw"no event provided";if(!this.childTemplate)throw"no childTemplate provided";if(""==this.$content)throw"$content is not defined";this.data||(this.data=!1);var e=new this.childViewConstructor({model:t,eventAggr:this.eventAggr,template:this.childTemplate,event:this.event,text:this.text,data:this.data});return this.childViews.push(e),this._rendered&&this.$content.append(e.$el),e},remove:function(){},reset:function(){if(!this.childViewConstructor)throw"no child view constructor provided";if(!this.eventAggr)throw"no eventAggr provided";if(!this.event)throw"no event provided";if(!this.childTemplate)throw"no childTemplate provided";if(""==this.$content)throw"$content is not defined";this.data||(this.data=!1);var t=this;this.$content.animate({opacity:"0"},0,function(){t.isVisible=!1,t.toggleVisible()});for(var e=0;this.childViews.length>e;e++)this.childViews[e].$el.remove(),delete this.childViews[e];return this.childViews=[],this.loadedImgs=0,this.totalImgs=this.collection.length,i.each(this.collection.models,function(t){var e=new this.childViewConstructor({model:t,eventAggr:this.eventAggr,template:this.childTemplate,event:this.event,text:this.text,data:this.data});this.childViews.push(e),e.$el.find("img").bind("load",this.loadComplete),this.$content.append(e.$el)},this),this},loadComplete:function(){if(this.loadedImgs+=1,this.loadedImgs==this.totalImgs){var t=this;this.$content.animate({opacity:"1"},300,function(){t.isVisible=!0,t.toggleVisible()})}}}),n.CollapsablePane=n.BaseClass.extend({tagName:"li",events:{"click .enabled .header > a":"onClickEventHandler"},initialize:function(t){if(!t.template)throw"You need to supply a template!";if(!t.content)throw"You need to supply a content selector!";if(!t.eventAggr)throw"You need to supply an event aggregator!";this.eventAggr=t.eventAggr,this.template=t.template,this.content=t.content,t.text&&(this.text=t.text),void 0!=t.isEnabled&&(this.isEnabled=t.isEnabled),void 0!=t.isVisible&&(this.isVisible=t.isVisible),void 0!=t.isCollapsed&&(this.isCollapsed=t.isCollapsed),t.tagName&&(this.tagName=t.tagName),this.render()},onClickEventHandler:function(t){t.preventDefault(),this.isCollapsed=1==this.isCollapsed?!1:!0,this.toggleCollapsed()},toggleCollapsed:function(){var t=this;this.$el.find(".content:first").animate({height:"toggle"},200,function(){t.$(".pane:first").toggleClass("collapsed")})},toggleEnabled:function(){1==this.isEnabled?(this.$el.addClass("enabled"),this.$el.removeClass("disabled"),this.$el.css("opacity","1")):(this.$el.removeClass("enabled"),this.$el.addClass("disabled"),this.$el.css("opacity",".5"))},enabled:function(t){return void 0==t||void 0==this.isEnabled?this.isEnabled:(this.isEnabled!=t&&(this.isEnabled=t,this.toggleEnabled()),this.isEnabled)},collapsed:function(t){return void 0==t||void 0==this.isCollapsed?this.isCollapsed:(this.isCollapsed!=t&&(this.isCollapsed=t,this.toggleCollapsed()),this.isEnabled)}}),n.Choice=n.BaseClass.extend({tagName:"li",data:{value:"",name:"",hasDescription:!1,label:"",price:"",description:""},events:{"change label > input":"onClickEventHandler"},initialize:function(t){this.eventAggr=t.eventAggr,this.template=t.template,this.event=t.event,this.text=t.text,t.data&&(this.data=t.data),this.model.bind("change:isSelected",this.toggleSelected,this),this.model.bind("change:hasDescription",this.toggleDescription,this),this.model.bind("change:price",this.updatePrice,this),this.render()},render:function(){if(this.text){var t=this.model.toJSON();this.data&&e.extend(!0,t,this.data),e.extend(!0,t,this.text),this.$el=e(this.template(t))}else{var t=this.model.toJSON();this.data&&e.extend(!0,t,this.data),this.$el=e(t)}this.toggleDescription(),this.model&&(0==this.model.get("available")||this.model.get("price")==this.text.notAvailableText&&0==Number(this.model.get("rate")))&&this.$el.addClass("disabled")},toggleEnabled:function(){1==this.isEnabled?(this.$el.addClass("enabled"),this.$el.removeClass("disabled"),this.$el.css("opacity","1")):0==this.isEnabled&&(this.$el.removeClass("enabled"),this.$el.addClass("disabled"),this.$el.css("opacity",".5"))},toggleDescription:function(){0==this.model.get("hasDescription")||"false"==this.model.get("hasDescription")?this.$el.find(".info").css("display","none"):this.$el.find(".info").removeAttr("style")},updatePrice:function(){this.$el.find(".price").html(this.model.get("price")),this.model.get("price")==this.text.notAvailableText?this.$el.addClass("disabled"):this.$el.removeClass("disabled")},onClickEventHandler:function(t){return t.preventDefault(),this.eventAggr.trigger(this.event,this.model,this),!1},toggleSelected:function(){this.model.get("isSelected")?this.$el.find("label > input").attr("checked",!0):this.$el.find("label > input").attr("checked",!1)}}),n.ChoiceDropDown=n.BaseClass.extend({tagName:"li",data:{value:"value",name:"name",hasDescription:!0,label:"label",price:"$123.45",description:""},events:{},initialize:function(t){this.eventAggr=t.eventAggr,this.template=t.template,this.event=t.event,this.text=t.text,t.data&&(this.data=t.data),this.model.bind("change:hasDescription",this.toggleDescription,this),this.model.bind("change:price",this.updatePrice,this),this.render()},render:function(){if(this.aspDropDown=new t.views.DropDownSelect({text:{name:"asp-options",selected:"select"},template:t.config.templates.get("dropdown-select"),collection:new t.models.DropDownOptions(this.model.get("aspOptions"),{optionGroup:"aspOptions"}),childViewConstructor:t.views.DropDownOption,childTemplate:t.config.templates.get("dropdown-option"),eventAggr:this.eventAggr,event:"aspSelection"}),this.text){var i=this.model.toJSON();this.data&&e.extend(!0,i,this.data),e.extend(!0,i,this.text),this.$el=e(this.template(i))}else{var i=this.model.toJSON();this.data&&e.extend(!0,i,this.data),this.$el=e(i)}this.toggleDescription(),!this.model||0!=this.model.get("available")&&this.model.get("price")!=this.text.notAvailableText||(this.$el.addClass("disabled"),this.$el.find(".info").css("display","none")),this.$el.append(this.aspDropDown.$el)},toggleDescription:function(){0==this.model.get("hasDescription")||"false"==this.model.get("hasDescription")?this.$el.find(".info").css("display","none"):this.$el.find(".info").css("display","inline")},updatePrice:function(){this.$el.find(".price").html(this.model.get("price"))},onChangeEventHandler:function(t){return t.preventDefault(),!1},onClickEventHandler:function(t){return t.preventDefault(),this.eventAggr.trigger(this.event,this.model,this),!1},toggleSelected:function(){this.model.get("isSelected")?this.$el.find("label > input").attr("checked",!0):this.$el.find("label > input").attr("checked",!1)}}),n.Choices=s.View.extend({views:{},initialize:function(e){this.template=t.config.templates.get("choices"),this.eventAggr=e.eventAggr,this.model=e.model,this.collection=this.model.get("vehicleModels"),this.model.bind("change:isSelected",this.toggleSelected,this),this.reset()},reset:function(){for(var t in this.views)this.views[t].$el.remove(),delete this.views[t];this.views={},this.render()},render:function(t){var s=this;return this.model=t?t:this.model,this.$el=e(this.template(this.model.toJSON())),i.each(this.collection.models,function(t){var e=new n.Choice({model:t,text:s.options.text,eventAggr:s.eventAggr});this.$el.find("ul:first").append(e.$el)},this),this},addView:function(t,e){return this.views[t]=e,this.$el.append(e.$el),e},removeView:function(t){return this.views[t]?(this.views[t].$el.remove(),delete this.views[t],void 0):!1},getView:function(t){return this.views[t]?this.views[t]:void 0},toggleSelected:function(){this.$el.toggleClass("selected"),this.$el.fadeToggle("fast",function(){})},onClickEventHandler:function(t){t.preventDefault()}}),n.Vehicle=n.BaseClass.extend({tagName:"li",events:{click:"onClickEventHandler"},initialize:function(t){this.eventAggr=t.eventAggr,this.template=t.template,this.event=t.event,this.model.bind("change:isSelected",this.toggleSelected,this),this.render()},render:function(t){t&&(this.model=t),this.$el=e(this.template(this.model.toJSON()))},toggleSelected:function(){this.$el.toggleClass("selected")},onClickEventHandler:function(t){t.preventDefault(),this.eventAggr.trigger(this.event,this.model)}}),n.PromoTile=n.BaseClass.extend({tagName:"li",initialize:function(e){this.template=e.template?e.template:t.config.templates.get("estimate-payments-tmpl"),this.text=e.text?e.text:t.config.staticText.get(),e.content&&(this.content=e.content),e.isVisible&&(this.isVisible=e.isVisible),this.isCollapsed=!0,this.render()},render:function(t){this._rendered=!0;var s=this;for(var n in this.childViews)this.childViews[n].$el.remove(),delete this.childViews[n];if(this.model&&t&&(this.model=t),this.model&&!this.text){var l=this.model.toJSON();this.data&&e.extend(!0,l,this.data),this.$el=e(l),void 0!=this.model.get("isSelected")&&(this.toggleSelected(),this.model.bind("change:isSelected",this.toggleSelected,this)),this.model.bind("change",this.reset,this)}else if(!this.model&&this.text){var l=this.text;this.data&&e.extend(!0,l,this.data),this.$el=e(this.template(l))}else if(this.model&&this.text){var l=this.model.toJSON();e.extend(!0,l,this.text),this.data&&e.extend(!0,l,this.data),this.$el=e(this.template(l)),void 0!=this.model.get("isSelected")&&(this.toggleSelected(),this.model.bind("change:isSelected",this.toggleSelected,this)),this.model.bind("change",this.reset,this)}void 0!=this.isVisible,void 0!=this.isEnabled&&(this.toggleEnabled(),this.bind("change:isEnabled",this.toggleEnabled,this)),this.childViews={},this.$content||(this.$content=this.content?this.$(this.content):this.$el);for(var n in this.childViews)this.childViews[n].render(),this.$content.append(this.childViews[childViews].$el);return i(this).bindAll("loadComplete"),this.isCollapsed?this.$el.animate({opacity:"0",height:"0"},0,function(){s.isVisible=!1}):this.$el.animate({opacity:"0"},0,function(){s.isVisible=!1}),this.$el.find("img").bind("load",this.loadComplete),this},reset:function(t){if(this.toggleVisible(),t&&(this.model=t),this.text){var i=t.toJSON();e.extend(!0,i,this.text),this.$el.html(e(this.template(i)).html()),this.$el.find("img").unbind("load",this.loadComplete),this.$el.find("img").bind("load",this.loadComplete)}else this.$el.html(e(this.template(i)).html()),this.$el.find("img").unbind("load",this.loadComplete),this.$el.find("img").bind("load",this.loadComplete)},loadComplete:function(){this.isVisible=!0,this.toggleVisible()},toggleVisible:function(){if(1==this.isVisible&&"default"!=this.model.get("id")){var t=this;t.$el.addClass("visible"),t.$el.removeClass("hidden"),this.isCollapsed?this.$el.animate({opacity:"1",height:"120px"},100,function(){this.isCollapsed=!1}):this.$el.animate({opacity:"1"},100,function(){this.isCollapsed=!1})}else{var t=this;this.isCollapsed?this.$el.animate({opacity:"0",height:"0"},0,function(){t.$el.removeClass("visible"),t.$el.addClass("hidden"),this.isCollapsed=!0}):this.$el.animate({opacity:"0"},0,function(){t.$el.removeClass("visible"),t.$el.addClass("hidden"),this.isCollapsed=!0})}},collapsed:function(t){return void 0==t||void 0==this.isCollapsed?this.isCollapsed:(this.isCollapsed!=t&&(this.isCollapsed=t),this.isEnabled)}}),n.Selection=s.View.extend({tagName:"section",id:"selection",initialize:function(){},reset:function(){return this.selectedVehicle.reset(),this.selectedVehiclePrice.reset(),this.paymentCalculator.reset(),this.$el.append(this.selectedVehicle.$el,this.selectedVehiclePrice.$el,this.paymentCalculator.$el),this}}),n.SelectedVehicle=n.BaseClass.extend({tagName:"div",initialize:function(e){this.template=e.template?e.template:t.config.templates.get("estimate-payments-tmpl"),this.text=e.text?e.text:t.config.staticText.get(),e.content&&(this.content=e.content),this.render()}}),n.VehicleProfile=n.BaseClass.extend({tagName:"section",initialize:function(e){if(!e.template)throw"You need to supply a template!";if(!e.text)throw"You need to some text!";this.template=e.template?e.template:t.config.templates.get("estimate-payments-tmpl"),this.text=e.text?e.text:t.config.staticText.get(),e.content&&(this.content=e.content),void 0!=e.isEnabled&&(this.isEnabled=e.isEnabled),void 0!=e.isVisible&&(this.isVisible=e.isVisible),e.tagName&&(this.tagName=e.tagName),e.id&&(this.id=e.id),this.render()}}),n.Vehicle360=n.BaseClass.extend({tagName:"section",initialize:function(e){if(!e.template)throw"You need to supply a template!";if(!e.text)throw"You need to some text!";this.template=e.template?e.template:t.config.templates.get("estimate-payments-tmpl"),this.text=e.text?e.text:t.config.staticText.get(),e.content&&(this.content=e.content),void 0!=e.isEnabled&&(this.isEnabled=e.isEnabled),void 0!=e.isVisible&&(this.isVisible=e.isVisible),e.tagName&&(this.tagName=e.tagName),e.id&&(this.id=e.id),this.render()},reset:function(t){t&&(this.model=t);var i,s=this.model.get("extColour"),n=this.model.get("extColours");e.each(n,function(t,e){e.code===s&&(i=e.images)});var l=t.toJSON();e.extend(!0,l,this.text,{defaultModelImage:i[0]}),this.$el.html(e(this.template(l)).html());var a=this.$el,o=new Image;o.onload=function(){a.find("img"),a.find("img").reel({images:i,klass:"v360reel"}),a.find(".imageWrap").height(a.find("img:first").height())},o.onerror=function(){},o.src=i[0]}}),n.BasePrice=n.BaseClass.extend({tagName:"table",initialize:function(e){this.template=e.template?e.template:t.config.templates.get("base-price"),this.text=e.text?e.text:t.config.staticText.get(),e.content&&(this.content=e.content),this.model.bind("change",this.reset,this),this.render()}}),n.PricingOptions=n.BaseClass.extend({tagName:"div",initialize:function(e){this.hasTax=!1,this.hasFreight=!1,this.showsPricing=!1,this.on=this.options.text.on,this.off=this.options.text.off,this.visible=this.options.text.visible,this.hidden=this.options.text.hidden,this.template=e.template?e.template:t.config.templates.get("pricing-options"),this.text=e.text?e.text:t.config.staticText.get(),e.content&&(this.content=e.content),this.eventAggr=e.eventAggr,this.render(),this.toggleTaxes(),this.toggleFreight(),this.toggleDetails(),this.model.bind("change:hasTax",this.toggleTaxes,this),this.model.bind("change:hasFreight",this.toggleFreight,this),this.model.bind("change:detailsSelected",this.toggleDetails,this)},reset:function(){},events:{"click .taxes":"taxesSelection","click .freight":"freightSelection","click .details":"detailsSelection"},setButton:function(t,e){this.$(t).text(e?this.on:this.off)},toggleDetails:function(){1==this.model.get("detailsSelected")?this.$el.find(".details > i").text(this.visible):0==this.model.get("detailsSelected")&&this.$el.find(".details > i").text(this.hidden)},toggleTaxes:function(){1==this.model.get("hasTax")?this.$el.find(".taxes > small").text(this.on):0==this.model.get("hasTax")&&this.$el.find(".taxes > small").text(this.off)},toggleFreight:function(){1==this.model.get("hasFreight")?this.$el.find(".freight > small").text(this.on):0==this.model.get("hasFreight")&&this.$el.find(".freight > small").text(this.off)},taxesSelection:function(){this.eventAggr.trigger("taxesSelection",this.model)},freightSelection:function(){this.eventAggr.trigger("freightSelection",this.model)},detailsSelection:function(){this.eventAggr.trigger("detailsSelection",this.model)}}),n.SummaryTable=n.BaseClass.extend({id:"summaryTable",initialize:function(e){this.template=e.template?e.template:t.config.templates.get("summary-table"),this.text=e.text?e.text:t.config.staticText.get(),e.content&&(this.content=e),this.render(),this.model.bind("change",this.reset,this)
},render:function(t){t&&(this.model=t);var i=this.model.toJSON();e.extend(!0,i,this.text),this.$el=e(this.template(i)),this.toggleFreight()},reset:function(t){if((0==this.model.get("rates").qst||this.model.get("rates").qst==this.text.notAvailableText)&&this.model.set("qst",this.text.notAvailableText),(0==this.model.get("rates").pst||this.model.get("rates").pst==this.text.notAvailableText)&&this.model.set("pst",this.text.notAvailableText),(0==this.model.get("rates").hst||this.model.get("rates").hst==this.text.notAvailableText)&&this.model.set("hst",this.text.notAvailableText),(0==this.model.get("rates").gst||this.model.get("rates").gst==this.text.notAvailableText)&&this.model.set("gst",this.text.notAvailableText),t&&(this.model=t),this.text){var i=t.toJSON();e.extend(!0,i,this.text),this.$el.html(e(this.template(i)).html())}else this.$el.html(e(this.template(i)).html());this.toggleFreight()},toggleFreight:function(){1==this.model.get("hasFreight")?(this.$el.find(".freight > .not-included").css("display","none"),this.$el.find(".freight > .currency").removeAttr("style")):0==this.model.get("hasFreight")&&(this.$el.find(".freight > .currency").css("display","none"),this.$el.find(".freight > .not-included").removeAttr("style"))},updateTable:function(t,e){this.$("#"+t+" > td").text(this.model.get(e))},updateBreakdown:function(t,e,i){this.$("#"+t+" > lease").text(this.model.get(e)),this.$("#"+t+" > finance").text(this.model.get(i))}}),n.CalculatorColumn=n.BaseClass.extend({initialize:function(e){this.text=e.text?e.text:t.config.staticText.get(),this.eventAggr=e.eventAggr,this.render(),this.model.bind("change",this.reset,this),s.Validation.bind(this)},reset:function(){return this.$typeEl.text(this.model.get("title")),this.model.get("term")!=this.text.notAvailableText&&this.model.get("term")!=this.text.notIncludedText&&1>this.model.get("term").indexOf(this.text.months)?this.$termEl.text(this.model.get("term")+" "+this.text.months):this.$termEl.text(this.model.get("term")),this.$downPaymentEl.text(this.model.get("totalDownPayment")),this.$tradeInEl.text(this.model.get("totalTradeIn")),this.$rateEl.text(this.model.get("rate")),this.$annualkmEl.text(this.model.get("annualKM")),this.$amountFinancedEl.text(this.model.get("amountFinanced")),this.$monthlyPaymentBeforeTaxesEl.text(this.model.get("monthlyPaymentBeforeTaxes")),this.$taxesEl.text(this.model.get("taxes")),this.$totalMonthlyPaymentEl.text(this.model.get("totalMonthlyPayment")),this.$residualValueEl.text(this.model.get("residualValue")),this.$adjustedVehicleAmountEl.text(this.model.get("adjustedLeaseVehicleAmount")),this},render:function(){return this.$typeEl=e('<td id="type" class = "'+this.model.get("id")+'"> </td>'),this.$termEl=e('<td id="term" class = "'+this.model.get("id")+'"> </td>'),this.$rateEl=e('<td id="rate" class = "'+this.model.get("id")+'"> </td>'),this.$downPaymentEl=e('<td id="downPayment" class = "'+this.model.get("id")+'"> </td>'),this.$tradeInEl=e('<td id="tradeIn" class = "'+this.model.get("id")+'"> </td>'),this.$annualkmEl=e('<td id="annualKM" class="'+this.model.get("id")+'"> </td>'),this.$amountFinancedEl=e('<td id="amountFinanced" class = "'+this.model.get("id")+'"> </td>'),this.$monthlyPaymentBeforeTaxesEl=e('<td id="monthlyPyamentBeforeTaxes" class="'+this.model.get("id")+'"> </td>'),this.$taxesEl=e('<td id="taxes" class="'+this.model.get("id")+'"> </td>'),this.$totalMonthlyPaymentEl=e('<td id="totalMonthlyPayment" class="'+this.model.get("id")+'"> </td>'),this.$residualValueEl=e('<td id="residualValue" class="'+this.model.get("id")+'"> </td>'),this.$adjustedVehicleAmountEl=e('<td id="adjustedVehicleAmount" class="'+this.model.get("id")+'"> </td>'),this.$typeEl.text(this.model.get("title")),this.$termEl.text(this.model.get("term")+" "+this.text.months),this.$rateEl.text(this.model.get("rate")),this.$downPaymentEl.text(this.model.get("downPayment")),this.$tradeInEl.text(this.model.get("tradeIn")),this.$annualkmEl.text(this.model.get("annualKM")),this.$amountFinancedEl.text(this.model.get("amountFinanced")),this.$monthlyPaymentBeforeTaxesEl.text(this.model.get("monthlyPaymentBeforeTaxes")),this.$taxesEl.text(this.model.get("taxes")),this.$totalMonthlyPaymentEl.text(this.model.get("totalMonthlyPayment")),this.$residualValueEl.text(this.model.get("residualValue")),this.$adjustedVehicleAmountEl.text(this.model.get("adjustedLeaseVehicleAmount")),this}}),n.CalculatorTable=n.BaseClass.extend({tagName:"table",initialize:function(i){this.template=i.template?i.template:t.config.templates.get("calculator-selector-table"),this.text=i.text?i.text:t.config.staticText.get(),this.eventAggr=i.eventAggr,this.$el=e(this.template(this.text)),this.render()},render:function(){this.$typeRow=this.$el.find("#lfb-type"),this.$typeRow.find("td").remove(),this.$termRow=this.$el.find("#lfb-term"),this.$termRow.find("td").remove(),this.$rateRow=this.$el.find("#lfb-rate"),this.$rateRow.find("td").remove(),this.$downPaymentRow=this.$el.find("#lfb-down-payment"),this.$downPaymentRow.find("td").remove(),this.$tradeInRow=this.$el.find("#lfb-trade-in"),this.$tradeInRow.find("td").remove(),this.$annualKmRow=this.$el.find("#lfb-annual-km"),this.$annualKmRow.find("td").remove(),this.$amountFinancedRow=this.$el.find("#lfb-amount-financed"),this.$amountFinancedRow.find("td").remove(),this.$monthlyPaymentBeforeTaxesRow=this.$el.find("#lfb-monthly-payment"),this.$monthlyPaymentBeforeTaxesRow.find("td").remove(),this.$taxesRow=this.$el.find("#lfb-taxes"),this.$taxesRow.find("td").remove(),this.$totalMonthlyPaymentRow=this.$el.find("#lfb-total-monthly-payment"),this.$totalMonthlyPaymentRow.find("td").remove(),this.$adjustedVehicleAmountRow=this.$el.find("#lfb-adjusted-vehicle-amount"),this.$adjustedVehicleAmountRow.find("td").remove(),this.$residualValueRow=this.$el.find("#lfb-residual-value"),this.$residualValueRow.find("td").remove()},appendView:function(t,e){if(this.childViews[t])throw"You can not add two views with the same id!";return this.childViews[t]=e,e.parentView=this,this.$typeRow.append(e.$typeEl),this.$termRow.append(e.$termEl),this.$rateRow.append(e.$rateEl),this.$downPaymentRow.append(e.$downPaymentEl),this.$tradeInRow.append(e.$tradeInEl),this.$annualKmRow.append(e.$annualkmEl),this.$amountFinancedRow.append(e.$amountFinancedEl),this.$monthlyPaymentBeforeTaxesRow.append(e.$monthlyPaymentBeforeTaxesEl),this.$taxesRow.append(e.$taxesEl),this.$totalMonthlyPaymentRow.append(e.$totalMonthlyPaymentEl),this.$adjustedVehicleAmountRow.append(e.$adjustedVehicleAmountEl),this.$residualValueRow.append(e.$residualValueEl),this},reset:function(){}}),n.CalculatorSelectorTable=n.BaseClass.extend({tagName:"table",initialize:function(i){this.template=i.template?i.template:t.config.templates.get("calculator-selector-table"),this.text=i.text?i.text:t.config.staticText.get(),this.eventAggr=i.eventAggr,this.$el=e(this.template(this.text)),this.render()},render:function(){this.$typeRow=this.$el.find("#pc-type"),this.$typeRow.find("td").remove(),this.$termRow=this.$el.find("#pc-term"),this.$termRow.find("td").remove(),this.$rateRow=this.$el.find("#pc-rate"),this.$rateRow.find("td").remove(),this.$downPaymentRow=this.$el.find("#pc-down-payment"),this.$downPaymentRow.find("td").remove(),this.$tradeInRow=this.$el.find("#pc-trade-in"),this.$tradeInRow.find("td").remove(),this.$annualKmRow=this.$el.find("#pc-annual-km"),this.$annualKmRow.find("td").remove(),this.$monthlyPaymentRow=this.$el.find("#pc-monthly-payment"),this.$monthlyPaymentRow.find("td").remove(),this.$biWeeklyPaymentRow=this.$el.find("#pc-bi-weekly-payment"),this.$biWeeklyPaymentRow.find("td").remove()},add:function(e){var i=this,s=new t.views.CalculatorSelectorColumn({text:i.text,paymentOptions:i.paymentOptions,termOptions:i.termOptions,kmOptions:i.kmOptions,eventAggr:i.eventAggr,model:e});this.$typeRow.append(s.$typeEl),this.$termRow.append(s.$termEl),this.$rateRow.append(s.$rateEl),this.$downPaymentRow.append(s.$downPaymentEl),this.$tradeInRow.append(s.$tradeInEl),this.$annualKmRow.append(s.$annualkmEl),this.$monthlyPaymentRow.append(s.$monthlyPaymentEl),this.$biWeeklyPaymentRow.append(s.$biWeeklyEl)},appendView:function(t,e){if(this.childViews[t])throw"You can not add two views with the same id!";return this.childViews[t]=e,e.parentView=this,this.$typeRow.append(e.$typeEl),this.$termRow.append(e.$termEl),this.$rateRow.append(e.$rateEl),this.$downPaymentRow.append(e.$downPaymentEl),this.$tradeInRow.append(e.$tradeInEl),this.$annualKmRow.append(e.$annualkmEl),this.$annualKmRow.append(e.$annualkmNotAvailablEl),this.$monthlyPaymentRow.append(e.$monthlyPaymentEl),this.$biWeeklyPaymentRow.append(e.$biWeeklyEl),e},reset:function(){}}),n.CalculatorSelectorColumn=n.BaseClass.extend({initialize:function(e){this.text=e.text?e.text:t.config.staticText.get(),this.eventAggr=e.eventAggr,this.render(),this.model.bind("change",this.reset,this),s.Validation.bind(this)},reset:function(){return this.parentView.$typeRow.find(this.$typeEl).attr("class",this.model.get("optionGroup")),this.parentView.$typeRow.find(this.$typeEl).find("option[value="+this.model.get("type")+"]").attr("selected","selected"),this.parentView.$termRow.find(this.$termEl).attr("class",this.model.get("optionGroup")),this.parentView.$termRow.find(this.$termEl).find("option[value="+this.model.get("term")+"]").attr("selected","selected"),this.$rateEl.text(this.model.get("rate")),this.parentView.$downPaymentRow.find("."+this.model.get("optionGroup")+" > input").val(this.model.get("downPayment")),this.parentView.$tradeInRow.find("."+this.model.get("optionGroup")+" > input").val(this.model.get("tradeIn")),this.model.get("annualKM")!=this.text.notAvailableText?(this.parentView.$annualKmRow.find(this.$annualkmEl).css("display","table-cell").attr("class",this.model.get("optionGroup")),this.parentView.$annualKmRow.find(this.$annualkmNotAvailablEl).css("display","none").attr("class",this.model.get("optionGroup"))):(this.parentView.$annualKmRow.find(this.$annualkmEl).css("display","none").attr("class",this.model.get("optionGroup")),this.parentView.$annualKmRow.find(this.$annualkmNotAvailablEl).css("display","table-cell").attr("class",this.model.get("optionGroup"))),this.$monthlyPaymentEl.text(this.model.get("monthlyPayment")),this.$biWeeklyEl.text(this.model.get("biWeeklyPayment")),this},render:function(){this.paymentTypeDropDown=new t.views.DropDownSelect({text:{name:this.text.paymentOpts.name,selected:this.model.get("type")},template:t.config.templates.get("dropdown-select"),collection:this.model.get("paymentPlans"),childViewConstructor:t.views.DropDownOption,childTemplate:t.config.templates.get("dropdown-option-payment"),eventAggr:this.eventAggr,event:"paymentTypeSelection"}),this.termDropDown=new t.views.DropDownSelect({text:{name:this.text.termOpts.name,selected:this.model.get("term")},template:t.config.templates.get("dropdown-select"),collection:this.model.get("termOptions"),childViewConstructor:t.views.DropDownOption,childTemplate:t.config.templates.get("dropdown-option"),eventAggr:this.eventAggr,event:"paymentTermSelection"}),this.annualKmDropDown=new t.views.DropDownSelect({text:{name:this.text.kmOpts.name,selected:this.model.get("term")},template:t.config.templates.get("dropdown-select"),collection:this.model.get("kmOptions"),childViewConstructor:t.views.DropDownOption,childTemplate:t.config.templates.get("dropdown-option"),eventAggr:this.eventAggr,event:"annualKMSelection"}),this.$typeEl=e('<td id="type" class = "'+this.model.get("id")+'"> </td>'),this.$termEl=e('<td id="term" class = "'+this.model.get("id")+'"> </td>'),this.$rateEl=e('<td id="rate" class = "'+this.model.get("id")+'"> </td>'),this.$downPaymentEl=e('<td id="downPayment" class = "'+this.model.get("id")+'"> </td>'),this.$tradeInEl=e('<td id="tradeIn" class = "'+this.model.get("id")+'"> </td>'),this.$annualkmEl=e('<td id="annualKM" class = "'+this.model.get("id")+'"> </td>'),this.$annualkmNotAvailablEl=e('<td id="annualkmNotAvailable" class = "'+this.model.get("id")+'">'+this.text.notAvailableText+"</td>"),this.$monthlyPaymentEl=e('<td id="monthlyPyament" class = "'+this.model.get("id")+'"> </td>'),this.$biWeeklyEl=e('<td id="biWeeklyPayment" class = "'+this.model.get("id")+'"> </td>'),this.$termDropDownEl=this.termDropDown.$el,this.$paymentTypeDropDownEl=this.paymentTypeDropDown.$el,this.$annulaKmDropDownEl=this.annualKmDropDown.$el,this.$typeEl.append(this.$paymentTypeDropDownEl),this.$termEl.append(this.$termDropDownEl),this.$rateEl.text(this.model.get("rate")),this.$downPaymentEl.append(this.text.leftDollarSign+'<input id="downPayment" value="'+this.model.get("downPayment")+'" name="'+this.model.get("type")+'-down-payment">'+this.text.rightDollarSign),this.$tradeInEl.append(this.text.leftDollarSign+'<input  id="tradeIn" value="'+this.model.get("tradeIn")+'" name="'+this.model.get("type")+'-trade-in">'+this.text.rightDollarSign),this.$annualkmEl.append(this.$annulaKmDropDownEl),this.$monthlyPaymentEl.text(this.model.get("monthlyPayment")),this.$biWeeklyEl.text(this.model.get("biWeeklyPayment")),i(this).bindAll("downPaymentChange"),this.$downPaymentEl.find("input").bind("keyup",this.downPaymentChange),i(this).bindAll("tradeInChange"),this.$tradeInEl.find("input").bind("keyup",this.tradeInChange),i(this).bindAll("inputOnBlur"),this.$tradeInEl.find("input").bind("blur",this.inputOnBlur),i(this).bindAll("inputOnBlur"),this.$downPaymentEl.find("input").bind("blur",this.inputOnBlur)},downPaymentChange:function(t){this.eventAggr.trigger("downPaymentChange",{value:t.target.value,optionGroup:this.model.get("optionGroup"),id:t.target.id})},tradeInChange:function(t){this.eventAggr.trigger("tradeInChange",{value:t.target.value,optionGroup:this.model.get("optionGroup"),id:t.target.id})},inputOnBlur:function(t){this.eventAggr.trigger("inputOnBlur",{value:t.target.value,optionGroup:this.model.get("optionGroup"),id:t.target.id})}}),n.PaymentCalculator=n.BaseClass.extend({tagName:"div",initialize:function(e){this.template=e.template?e.template:t.config.templates.get("payment-calculator"),this.text=e.text?e.text:t.config.staticText.get(),e.content&&(this.content=e.content),this.model=new s.Model(this.text),this.render()},reset:function(){this.$el=e(this.template(this.options.text)),this.leaseTermOptions.reset(),this.financeTermOptions.reset(),this.leaseAnnualKmOptions.reset(),this.financeAnnualKmOptions.reset(),this.$("#pc-term > .lease").append(this.leaseTermOptions.$el),this.$("#pc-term > .finance").append(this.financeTermOptions.$el),this.$("#pc-annual-km > .lease").append(this.leaseAnnualKmOptions.$el),this.$("#pc-annual-km > .finance").append(this.financeAnnualKmOptions.$el),this.render()},render:function(){this.$el=e(this.template(this.options.text)),this.updateRowText("pc-rate","leaseRate","financeRate"),this.updateRowInput("pc-down-payment","leaseDownPayment","financeDownPayment"),this.updateRowInput("pc-trade-in","leaseTradeIn","financeTradeIn"),this.updateRowText("pc-monthly-payment","leaseMonthlyPayment","financeMonthlyPayment"),this.updateRowText("pc-bi-weekly-payment","leaseBiWeeklyPayment","financeBiWeeklyPayment")},updateRowText:function(t,e,i){this.$("#"+t+" > .lease").text(this.model.get(e)),this.$("#"+t+" > .finance").text(this.model.get(i))},updateRowInput:function(t,e,i){this.$("#"+t+" > .lease > input").val(this.model.get(e)),this.$("#"+t+" > .finance > input").val(this.model.get(i))}}),n.Popups=n.BaseClass.extend({tagName:"div",initialize:function(e){if(!e.template)throw"You need to supply a template!";if(!e.text)throw"You need to some text!";this.template=e.template?e.template:t.config.templates.get("estimate-payments-tmpl"),this.text=e.text?e.text:t.config.staticText.get(),e.content&&(this.content=e.content),void 0!=e.isEnabled&&(this.isEnabled=e.isEnabled),void 0!=e.isVisible&&(this.isVisible=e.isVisible),e.tagName&&(this.tagName=e.tagName),e.id&&(this.id=e.id),this.render()},show:function(t){return i.each(this.childViews,function(t){t.visible(!1)},this),this.getView(t).visible(!0),this.visible(!0),this},hide:function(){return i.each(this.childViews,function(t){t.visible(!1)},this),this.visible(!1),this}}),n.Popup=n.BaseClass.extend({tagName:"div",events:{"click a":"onClickEventHandler"},initialize:function(e){if(!e.template)throw"You need to supply a template!";if(!e.text)throw"You need to some text!";this.template=e.template?e.template:t.config.templates.get("estimate-payments-tmpl"),this.text=e.text?e.text:t.config.staticText.get(),e.content&&(this.content=e.content),void 0!=e.isEnabled&&(this.isEnabled=e.isEnabled),void 0!=e.isVisible&&(this.isVisible=e.isVisible),e.tagName&&(this.tagName=e.tagName),e.id&&(this.id=e.id),this.eventAggr=this.options.eventAggr,this.render(),i(this).bindAll("onClickEventHandler")},onClickEventHandler:function(){this.eventAggr.trigger("popupCloseBtnClick",this.model)}}),n.UpdateLocationPopup=n.BaseClass.extend({tagName:"div",events:{"click a":"onClickEventHandler"},initialize:function(e){if(!e.template)throw"You need to supply a template!";if(!e.text)throw"You need to some text!";this.template=e.template?e.template:t.config.templates.get("estimate-payments-tmpl"),this.text=e.text?e.text:t.config.staticText.get(),e.content&&(this.content=e.content),void 0!=e.isEnabled&&(this.isEnabled=e.isEnabled),void 0!=e.isVisible&&(this.isVisible=e.isVisible),e.tagName&&(this.tagName=e.tagName),e.id&&(this.id=e.id),this.eventAggr=this.options.eventAggr,this.render(),i(this).bindAll("onClickEventHandler")},reset:function(){this.$el.find("#update-current-location").text(this.model.get("currentLocation"))},onClickEventHandler:function(){this.eventAggr.trigger("popupCloseBtnClick",this.model)}}),n.PostalCodeSearch=n.BaseClass.extend({tagName:"div",events:{"click button":"onClickEventHandler","blur input":"postalCodeOnBlur","keypress input":"onEnterKeyPress"},initialize:function(e){if(!e.template)throw"You need to supply a template!";if(!e.text)throw"You need to some text!";this.template=e.template?e.template:t.config.templates.get("estimate-payments-tmpl"),this.text=e.text?e.text:t.config.staticText.get(),this.eventAggr=e.eventAggr,e.content&&(this.content=e.content),void 0!=e.isEnabled&&(this.isEnabled=e.isEnabled),void 0!=e.isVisible&&(this.isVisible=e.isVisible),e.tagName&&(this.tagName=e.tagName),e.id&&(this.id=e.id),s.Validation.bind(this,{valid:this.valid,invalid:this.invalid}),this.render(),this.model.bind("change",this.reset)},reset:function(){},onClickEventHandler:function(t){t.preventDefault(),this.model.validate(),1==this.model.isValid("retailersPostalCode")&&this.eventAggr.trigger("poCodeSearchBtnClick",this.$el.find("input").val())},postalCodeOnBlur:function(t){t.preventDefault;var e=t.currentTarget.value.toUpperCase(),i=RegExp("[ ]+","g");e=e.replace(i,""),this.$("input").val(e),this.eventAggr.trigger("dealerPostalCodeUpdate",e)},onEnterKeyPress:function(t){var e=t.keyCode?t.keyCode:t.which;13==e&&(this.postalCodeOnBlur(t),1==this.model.isValid("retailersPostalCode")&&this.eventAggr.trigger("poCodeSearchBtnClick",this.model))},valid:function(t){t.$el.removeClass("error")},invalid:function(t){t.$el.addClass("error")},visible:function(t){t?this.$el.show():this.$el.hide()}}),n.DealerList=n.ListBaseClass.extend({tagName:"ul",initialize:function(e){this.template=e.template?e.template:t.config.templates.get("tab-nav"),this.text=e.text?e.text:t.config.staticText.get(),this.collection=e.collection,this.eventAggr=e.eventAggr,this.event=e.event,this.childViewConstructor=e.childViewConstructor,this.childTemplate=e.childTemplate,this.content=e.content,this.isCollapsed=e.isCollapsed,e.id&&(this.id=e.id),this.render(),this.isCollapsed&&this.$el.addClass("collapsed")},toggleCollapsed:function(){var t=this,i=this.$el.prop("scrollHeight"),s=Math.floor(i/5);0==this.isCollapsed?this.$el.animate({height:i},s,function(){t.$el.removeClass("collapsed")}):this.$el.animate({height:0},s/2,function(){t.$el.addClass("collapsed"),e("html, body").animate({scrollTop:e(this).parent().offset().top},500,function(){})})},collapsed:function(t){return void 0==t||void 0==this.isCollapsed?this.isCollapsed:(this.isCollapsed!=t&&(this.isCollapsed=t,this.toggleCollapsed()),this.isEnabled)},reset:function(t){t&&(this.collection=t);for(var e=0;this.childViews.length>e;e++)this.childViews[e].$el.remove(),delete this.childViews[e];return this.childViews=[],this.collection.each(this.add),this},visible:function(t){t?this.$el.show():this.$el.hide()}}),n.DealerItem=n.BaseClass.extend({tagName:"li",events:{click:"onClickEventHandler"},initialize:function(e){if(!e.template)throw"You need to supply a template!";if(!e.text)throw"You need to some text!";this.template=e.template?e.template:t.config.templates.get("estimate-payments-tmpl"),this.text=e.text?e.text:t.config.staticText.get(),this.eventAggr=e.eventAggr,e.content&&(this.content=e.content),void 0!=e.isEnabled&&(this.isEnabled=e.isEnabled),void 0!=e.isVisible&&(this.isVisible=e.isVisible),e.tagName&&(this.tagName=e.tagName),e.id&&(this.id=e.id),this.render()},onClickEventHandler:function(t){t.preventDefault(),this.eventAggr.trigger("dealerSelection",this.model)}}),n.AssignedRetailer=n.BaseClass.extend({initialize:function(e){if(!e.template)throw"You need to supply a template!";if(!e.text)throw"You need to some text!";if(!e.eventAggr)throw"You need to some text!";this.template=e.template?e.template:t.config.templates.get("estimate-payments-tmpl"),this.text=e.text?e.text:t.config.staticText.get(),this.eventAggr=e.eventAggr,this.isCollapsed=e.isCollapsed,e.content&&(this.content=e.content),void 0!=e.isEnabled&&(this.isEnabled=e.isEnabled),void 0!=e.isVisible&&(this.isVisible=e.isVisible),e.tagName&&(this.tagName=e.tagName),e.id&&(this.id=e.id),i(this).bindAll("toggleCollapsed"),this.model.bind("change:isSelected",this.toggleCollapsed),this.render(),this.isCollapsed&&this.$el.addClass("collapsed")},onClickEventHandler:function(t){t.preventDefault(),this.eventAggr.trigger("dealerSelection",this.model)},toggleCollapsed:function(){var t=this;0==this.isCollapsed?this.$el.animate({height:this.$el.prop("scrollHeight")},200,function(){t.$el.removeClass("collapsed")}):this.$el.animate({height:0},200,function(){t.$el.addClass("collapsed")})},collapsed:function(t){return void 0==t||void 0==this.isCollapsed?this.isCollapsed:(this.isCollapsed!=t&&(this.isCollapsed=t,this.toggleCollapsed()),this.isEnabled)},toggleSelected:function(){},visible:function(t){t?this.$el.show():this.$el.hide()}}),n.UserInformationForm=n.BaseClass.extend({tagName:"div",events:{"click input[type=radio]":"radioOnClick","click input[type=checkbox]":"checkboxOnClick","blur input[type=text]":"inputOnBlur","keypress input[type=text]":"inputOnKeyPress","focus .contact-number input":"inputOnFocus","change select":"dropDownOnChange"},initialize:function(e){if(!e.template)throw"You need to supply a template!";if(!e.text)throw"You need to some text!";this.template=e.template?e.template:t.config.templates.get("estimate-payments-tmpl"),this.text=e.text?e.text:t.config.staticText.get(),this.eventAggr=e.eventAggr,this.accounting=e.accounting,e.content&&(this.content=e.content),void 0!=e.isEnabled&&(this.isEnabled=e.isEnabled),void 0!=e.isVisible&&(this.isVisible=e.isVisible),e.tagName&&(this.tagName=e.tagName),e.id&&(this.id=e.id),s.Validation.bind(this,{forceUpdate:!0,valid:this.valid,invalid:this.invalid}),this.model.bind("validated",this.validated,this),this.render(),this.model.bind("change",this.reset),i(this).bindAll("inputOnBlur","inputOnKeyPress","dropDownOnChange","valid","invalid","validated")},reset:function(){},dropDownOnChange:function(t){var i=this.model.preValidate(t.currentTarget.name,t.currentTarget.value);i?e(t.currentTarget).parent().addClass("error"):e(t.currentTarget).parent().removeClass("error");var s={};s[t.currentTarget.name]=t.currentTarget.value,this.model.set(s,{silent:!0})},inputOnFocus:function(){},radioOnClick:function(t){var i=e(t.currentTarget);i.addClass("selected"),i.parent().parent().find("> .error").removeClass("error");var s={};s[t.currentTarget.name]=t.currentTarget.value,s.tbMethodOfContact=t.currentTarget.value,this.model.validation.tbHomePhone.required=!1,this.model.validation.tbCellPhone.required=!1,this.model.validation[t.currentTarget.value].required=!0,this.model.set(s,{silent:!0})},checkboxOnClick:function(t){var i={};e(t.currentTarget).is(":checked")?(i[t.currentTarget.name]=!0,i.cbOptin=!0):(i[t.currentTarget.name]=!1,i.cbOptin=!1),this.model.set(i,{silent:!0})},inputOnBlur:function(t){if(t.preventDefault,"tbPostalCode"==t.currentTarget.name){t.currentTarget.value=t.currentTarget.value.toUpperCase();var i=RegExp("[ ]+","g");t.currentTarget.value=t.currentTarget.value.replace(i,""),this.$("input[name=tbPostalCode]").val(t.currentTarget.value)}var s=this.model.preValidate(t.currentTarget.name,t.currentTarget.value);s?e(t.currentTarget).parent().addClass("error"):e(t.currentTarget).parent().removeClass("error");var n={};n[t.currentTarget.name]=t.currentTarget.value,this.model.set(n,{silent:!0})},inputOnKeyPress:function(t){var i=t.keyCode?t.keyCode:t.which;if(13==i){if("tbPostalCode"==t.currentTarget.name){t.currentTarget.value=t.currentTarget.value.toUpperCase();var s=RegExp("[ ]+","g");t.currentTarget.value=t.currentTarget.value.replace(s,""),this.$("input[name=tbPostalCode]").val(t.currentTarget.value)}var n=this.model.preValidate(t.currentTarget.name,t.currentTarget.value);n?e(t.currentTarget).parent().addClass("error"):e(t.currentTarget).parent().removeClass("error");var l={};l[t.currentTarget.name]=t.currentTarget.value,this.model.set(l,{silent:!0})}},valid:function(t,e){t.$el.find("[name="+e+"]").parent().removeClass("error"),t.$el.find("#error-messages em[for="+e+"]").removeClass("visible")},invalid:function(t,e){t.$el.find("[name="+e+"]").parent().addClass("error"),t.$el.find("#error-messages em[for="+e+"]").addClass("visible")},validated:function(t){t?this.$el.find("#error-messages").removeClass("visible"):this.$el.find("#error-messages").addClass("visible")},visible:function(t){t?this.$el.show():this.$el.hide()}}),n.dealerThanks=n.BaseClass.extend({tagName:"li",events:{"click .newEstimate":"onClickEventHandler"},initialize:function(e){if(!e.template)throw"You need to supply a template!";if(!e.text)throw"You need to some text!";this.template=e.template?e.template:t.config.templates.get("estimate-payments-tmpl"),this.text=e.text?e.text:t.config.staticText.get(),this.eventAggr=e.eventAggr,e.content&&(this.content=e.content),void 0!=e.isEnabled&&(this.isEnabled=e.isEnabled),void 0!=e.isVisible&&(this.isVisible=e.isVisible),e.tagName&&(this.tagName=e.tagName),e.id&&(this.id=e.id),this.render()},onClickEventHandler:function(t){t.preventDefault(),this.eventAggr.trigger("newEstimateOnClick")},visible:function(t){t?this.$el.show():this.$el.hide()},toggleSelected:function(){}}),n.Legal=n.BaseClass.extend({tagName:"li",initialize:function(e){if(!e.template)throw"You need to supply a template!";if(!e.text)throw"You need to some text!";this.template=e.template?e.template:t.config.templates.get("estimate-payments-tmpl"),this.text=e.text?e.text:t.config.staticText.get(),this.render()}}),t.views=n}(app,jQuery,_,Backbone),function(t,e,i,s){var n=s.Router.extend({routes:{"country1/:country1":"country1Route","country1/:country1/city1/:city1":"city1Route","country1/:country1/city1/:city1/address1/:address1":"address1Route","country2/:country2":"country2Route","country2/:country2/city2/:city2":"city2Route","country3/:country3/city3/:city3/address3/:address3":"address3Route","*other":"defaultRoute"},country1Route:function(t){this.model.get("testModel").set("h1Text",t)},city1Route:function(){},address1Route:function(){},country2Route:function(){},city2Route:function(){},address2Route:function(){},defaultRoute:function(){},initialize:function(e){this.model=e.model,this.view=e.view,this.staticText=t.config.staticText.get(),this.lang=t.config.lang.get(),this.urls=t.config.urls.get(),this.formatting=t.config.formatting.get(),this.accounting=e.accounting,this.accounting.settings=this.formatting.currencySettings,this.accounting.percentSettings=this.formatting.percentSettings,i.extend(this,s.Events),i.bindAll(this,"testEvent"),this.bind("testEvent",this.testEvent),this.model.set({controller:this,testModel:new t.models.TestModel,mainMenu:new t.models.Menu}),this.view.add(new t.views.TestView({id:"testView",text:this.staticText,model:this.model.get("testModel"),controller:this,template:t.config.templates.get("test-section-tmpl"),isVisible:!0,isEnabled:!0,isCollapsed:!1})),this.view.add(new t.views.TestList({id:"testList",text:this.staticText,data:{title:"Test List Title"},controller:this,template:t.config.templates.get("test-list-tmpl"),collection:this.model.get("mainMenu"),childViewConstructor:t.views.TestListItem,childTemplate:t.config.templates.get("test-listItem-tmpl")})),this.model.get("mainMenu").reset([{text:"Item One",id:"menu-item-1"},{text:"Item Two",id:"menu-item-2"},{text:"Item Three",id:"menu-item-3"},{text:"Item Four",id:"menu-item-4"}]),this.start()},start:function(){s.history.start({pushState:!1,root:this.urls.app.root})},testEvent:function(t){this.navigate("country1/"+t,{trigger:!0,replace:!1})}});t.Controller=n}(app,jQuery,_,Backbone),app.main=function(t,e,i,s,n,l,a){if(n.emulateHTTP=!0,n.emulateJSON=!0,s.templateSettings={evaluate:/\{%(.+?)%\}/g,interpolate:/\{\{(.+?)\}\}/g,escape:/\{-(.+?)-\}/g},s.extend(n.Validation.patterns,{postalcode:/^[ABCEGHJKLMNPRSTVXY]{1}\d{1}[A-Z]{1} *\d{1}[A-Z]{1}\d{1}$/,userName:/^[A-Za-z0-9 ]{1,20}$/,phoneNumber:/^(1\s*[-\/\.]?)?(\((\d{3})\)|(\d{3}))\s*[-\/\.]?\s*(\d{3})\s*[-\/\.]?\s*(\d{4})\s*(([xX]|[eE][xX][tT])\.?\s*(\d+))*$/}),o===void 0){var o={};o.log=function(){},o.error=function(){},o.debug=function(){},o.warn=function(){}}$(function(){$("#no-js").remove(),t.M=new t.models.Model({lang:t.config.lang.get()}),t.V=new t.views.View({el:t.config.nodes.get("root"),text:t.config.staticText.get(),id:"View"}),t.C=new t.Controller({model:t.M,view:t.V,accounting:a})})};